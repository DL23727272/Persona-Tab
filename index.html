<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Alertify sakit sa ulo -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>
    <!-- Sweet -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
    <link rel="icon" type="image/x-icon" href="./img/logo.ico">

    <style>
        body{
            background-color: #000000;
        }
          .navbar {
            background-color: #8284ea; 
            transition: background-color 0.3s ease; 
          }
          .navbar.blurred {
            background-color: transparent; /* aalisin niya yung background color */
            backdrop-filter: blur(20px); /* then eto papalit, blur effect */
          }
          .nav-link {
            color: white;
            font-weight: 500;
            transition: color 0.3s ease 
          }
          .nav-link.scrolled {
            color: #ffffff;
            font-weight: 500;
          }
          .nav-link.scrolled:hover {
            color: #006341; 
            font-weight: 500;
          }
          input{
            border-radius: 10px;
            background: #c8c1c1;
            box-shadow: inset 5px 5px 6px #8a8585,
                        inset -5px -5px 6px #fffdfd;
          }
          .login_card{
            height: 90%;
            border-radius: 6px;
            background-color: rgba(255, 255, 255, 0.385); 
            backdrop-filter: blur(10px); 
            box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;
          }
          .login__bg{
            position: absolute;
            width: 100%;
            height: 105%;
            object-fit: cover;
            object-position: center;
            z-index: -1;
          }
           /* Scrollbar*/
          ::-webkit-scrollbar {
            width: 20px;
          }
          ::-webkit-scrollbar-track {
            box-shadow: inset 0 0 5px grey; 
            border-radius: 10px;
          }
          ::-webkit-scrollbar-thumb {
            background: #8284ea; 
            border-radius: 10px;
          }
          ::-webkit-scrollbar-thumb:hover {
            background: #b30000; 
          }
          /* END OF Scrollbar */
    </style>
</head>
<body>
     <!--Navbar-->
     <nav class="navbar navbar-expand-lg shadow-lg sticky-top" id="navbar">
        <div class="container-sm d-flex justify-content-between" style="width: 100%">
  
          <div class="d-flex justify-content-between align-items-center" style="width: 100vw">
            <div>
              <!-- for logo -->
              <a href="#" style="cursor: pointer;"> <img src="img/logo.png" alt="LOGO" style="width: 60px; "></a>
            </div>
            <div>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent">
                <i class="fa-solid fa-bars" id="mugIcon"></i>
              </button>
            </div>
          </div>
      
          <div class="collapse navbar-collapse container-fluid" id="navbarSupportedContent" style="width: 10vw">
            <ul class="navbar-nav mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link " aria-current="page" href="#">
                  Home
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link  " href="index.html#eventsSection">
                  Events
                </a>
              </li>
            </ul>
          </div>
  
        </div>
      </nav>
      <!--End ti Navbar -->

      <!-- <img src="img/bg.png" alt="image" class="login__bg" > -->

      

      <!------ LOGIN FORM -------->
      <section class="vh-100">
        <div class="container d-flex justify-content-end align-items-center h-100">
            <div class="col-12 col-md-6 col-lg-4">
                <div class="login_card card mt-1">
                  <form enctype="multipart/form-data" method="POST" class="mt-1">
                    <div class="m-5">
                        <div class="form-group my-4">
                          <img src="img/logo.png" alt="LOGO" style="width: 90px; ">
                        </div>
                        <div class="form-group my-4">
                            <label for="Name" style="font-weight: 700;"><i class="fa-solid fa-signature"></i> Username</label>
                            <input type="text" name="customerName" id="customerName" placeholder="Enter Username" class=" form-control" required>
                        </div>

                        <div class="form-group my-4">
                            <label for="customerPassword" style="font-weight: 700;">
                                <i class="fa-solid fa-lock"></i> Password
                            </label>
                              <div class="input-group">
                                <input type="password" class="form-control" id="customerPassword" name="customerPassword" placeholder="Enter Password" required>
                                <button class="btn btn-outline-light" type="button" id="togglePassword">
                                  <i class="fa fa-eye-slash" id="eyeIcon" aria-hidden="true"></i>
                                </button>
                              </div>
                        </div>
                      
                        
                       
                        <div class="form-group row justify-content-end"> 
                            <div class="col-auto">
                                <button type="button" id="addProductButton" class="btn btn-outline-light" onclick="Login()">Login</button>
                            </div>
                        </div>
                    </div>
                  </form>
                </div>

            </div>
        </div>
      </section>
      <!------ END LOGIN FORM -------->
    

      <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />

      <!--Hero-->
      <section class="container-sm">
        <div class="d-flex flex-column align-items-center text-center">
          <img
            src="./img/logo.png"
            style="width: 200px; height: 200px;"
            alt="logo"
            class="mt-5 mb-3 img-fluid"
            srcset=""
          />
          <p class="w-75 lead text-secondary fst-italic">
           Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora sit fugit
            quia odit a suscipit aut iste nisi earum porro quas asperiores labore nostrum,
            repellendus nobis. Impedit unde repellendus perferendis? Quisquam vitae iure
             blanditiis cum saepe suscipit. Repellat, aspernatur. Amet.
          </p>
      
        </div>
      </section>
      <!-- End Hero-->

   


    <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />





   <!-------------------------------Event with contestants----------------------------- -->

   <section class="container-sm mt-5" id="eventsSection">
    <h1 class="fst-italic text-center text-white">Upcoming Events</h1>
    <hr class="container-sm Sborder border-light mt-4 border-2 opacity-50" style="width: 50%;"/>
    <div class="container mt-5 eventSection">
      <!-- Event cards will be dynamically inserted here -->
    </div>
  </section>

  <!-------------------------------END Event with contestants----------------------------- -->










      
  <!-- <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" /> -->
      <!---Footer-->
      <footer class="mt-5 text-white p-3" style="background-color: #000000;">
        <div class="container-sm d-flex justify-content-between align-items-center">
          <div class="">
            <h4>Tabulation System</h4>
            <h5>DL VISUALS</h5>
            <ul>
              <li>Dran Leynard Gamoso</li>
              <li><a href="https://www.facebook.com/DLuvvsssU" style="text-decoration: none; color:white"><i class="fa-brands fa-facebook"></i> Facebook</a></li>
            </ul>
          </div>
          <div class="">
            <div>
              <img src="./img/logo.png" style=" width: 50px; height: 50px;" alt="">
            </div>
            <div>
              <p class="fst-bold">&copy DL Visuals</p>
            </div>
          </div>
        </div>
      </footer>
     <!---End Footer-->

     <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
     <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
     <script src="indexFetchContestants.js"></script>
     <script src="fetchScores.js"></script>
     <script>

         // --------------- FOR PASSWORD TOGGLE --------------
      
        document.addEventListener('DOMContentLoaded', function () {
          const togglePassword = document.getElementById('togglePassword');
          const passwordInput = document.getElementById('customerPassword');
          const eyeIcon = document.getElementById('eyeIcon');
        
          togglePassword.addEventListener('click', function () {
            // Toggle the type attribute
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
        
            // Toggle the eye icon
            if (type === 'password') {
              eyeIcon.classList.remove('fa-eye');
              eyeIcon.classList.add('fa-eye-slash');
            } else {
              eyeIcon.classList.remove('fa-eye-slash');
              eyeIcon.classList.add('fa-eye');
            }
          });
        });
      // --------------- END FOR PASSWORD TOGGLE --------------

      alertify.set('notifier', 'position', 'top-right');

     
      //For navbar
      window.onscroll = function () { scrollFunction() };

      function scrollFunction() {
        if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
          document.getElementById("navbar").classList.add("blurred");
          const navLinks = document.querySelectorAll(".nav-link");
          navLinks.forEach(link => link.classList.add("scrolled"));
          document.getElementById("mugIcon").classList.add("scrolled"); 
        } else {
          document.getElementById("navbar").classList.remove("blurred");
          const navLinks = document.querySelectorAll(".nav-link");
          navLinks.forEach(link => link.classList.remove("scrolled"));
          document.getElementById("mugIcon").classList.remove("scrolled"); 
        }
      }
      //end of function for navbarrr
     
      //form validation
      function Login() {
          var username = document.getElementById("customerName").value;
          var password = document.getElementById("customerPassword").value;
      
          if (username == "" && password == "") {
              alertify.error('Empty fields! Please fill all the fields.');
          } else if (username == "") {
              alertify.error('Fill up the Username field!');
          } else if (password == "") {
              alertify.error('Fill up the Password field!');
          } else {
              // Send form data to loginProcess.php using AJAX
              $.ajax({
                  type: "POST",
                  url: "./backend/loginProcess.php",
                  data: {
                      customerLoginName: username,
                      customerLoginPassword: password
                  },
                  dataType: "json",
                  success: function(response) {
                      // Handle success response
                      if (response.status === 'success') {

                          // if login goods 
                          //alertify.success(response.message + ' <i class="fa fa-spinner fa-spin"></i>');
                          Swal.fire({
                            icon: 'success',
                            title: response.message,
                            showConfirmButton: false,
                            timer: 2000 
                          });
                          

                          var judgeID = response.judgeID;
                          sessionStorage.setItem('judgeID', judgeID);
      
                          var customerNameInput = document.getElementById("customerName").value;
                          var customerName = customerNameInput;
                          sessionStorage.setItem('customerName', customerName); //tangina  40mins para dito
      
                          setTimeout(function() {

                              if (response.type === 'admin') {
                                  window.location.href = 'admin.html'; 
                              } else {
                                  window.location.href = 'home.html'; 
                              }

                          }, 2000);
      
                      } else {
                        //  alertify.error(response.message);// Display error message 
                          Swal.fire({
                            icon: 'error',
                            title: response.message,
                            showConfirmButton: false,
                            timer: 1500 
                          });
                          
                      }
                  },
                  error: function(xhr, status, error) {
                      console.error(xhr.responseText);
                      alertify.error('Failed to log in!');
                  }
              });
          }
      }

    
     </script>
    
     

    
</body>
</html>